{% extends 'clientes/base.html' %}

{% block content %}
    <div class="mb-3">
        <a href="#" class="btn btn-primary">Adicionar Cliente</a>
        <input type="text" class="form-control" id="searchInput" placeholder="Pesquisar Clientes" onkeyup="filterTable()">
    </div>

    <table class="table table-striped table-bordered table-hover">
        <thead class="table-light">
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>NIF</th>
                <th>Morada</th>
                <th>CÃ³digo Postal</th>
                <th>Localidade</th>
                <th>Telefone</th>
                <th>Email</th>
                <th>Website</th>
            </tr>
        </thead>
        <tbody>
            {% for cliente in clientes %}
                <tr>
                    <td>{{ cliente.id }}</td>
                    <td>{{ cliente.nome }}</td>
                    <td>{{ cliente.nif }}</td>
                    <td>{{ cliente.morada }}</td>
                    <td>{{ cliente.codigo_postal }}</td>
                    <td>{{ cliente.localidade }}</td>
                    <td>{{ cliente.telefone }}</td>
                    <td>{{ cliente.email }}</td>
                    <td>{{ cliente.website }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <script>
        function filterTable() {
            const input = document.getElementById("searchInput");
            const filter = input.value.toLowerCase();
            const table = document.querySelector("table");
            const trs = table.getElementsByTagName("tr");

            for (let i = 1; i < trs.length; i++) {
                const tds = trs[i].getElementsByTagName("td");
                let found = false;

                for (let j = 0; j < tds.length; j++) {
                    if (tds[j]) {
                        const txtValue = tds[j].textContent || tds[j].innerText;
                        if (txtValue.toLowerCase().indexOf(filter) > -1) {
                            found = true;
                            break;
                        }
                    }
                }

                trs[i].style.display = found ? "" : "none";
            }
        }
    </script>
{% endblock %}
